# Laravel Application Root .htaccess
# This file redirects all requests to the public folder

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Prevent direct access to sensitive files and folders
    RewriteRule ^(app|bootstrap|config|database|resources|routes|storage|tests|vendor|\.env|composer\.json|package\.json|\.git) - [F,L]
    
    # If the requested file/directory exists in public, serve it directly
    RewriteCond %{REQUEST_URI} !^/admin/public/
    RewriteCond %{DOCUMENT_ROOT}/admin/public%{REQUEST_URI} -f [OR]
    RewriteCond %{DOCUMENT_ROOT}/admin/public%{REQUEST_URI} -d
    RewriteRule ^(.*)$ public/$1 [L]
    
    # Redirect everything else to public folder
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>

